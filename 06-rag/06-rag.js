// å¯¼å…¥ dotenv åº“ï¼Œç”¨äºåŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
import { config } from "dotenv";
// ä» @langchain/google-genai åº“å¯¼å…¥ ChatGoogleGenerativeAI ç±»ï¼Œç”¨äºä¸ Google çš„ Gemini æ¨¡å‹è¿›è¡ŒèŠå¤©äº¤äº’
// import { ChatGoogleGenerativeAI } from "@langchain/google-genai";
import { ChatOpenAI } from "@langchain/openai";
// ä» @langchain/google-genai åº“å¯¼å…¥ GoogleGenerativeAIEmbeddings ç±»ï¼Œç”¨äºç”Ÿæˆæ–‡æœ¬åµŒå…¥
// import { GoogleGenerativeAIEmbeddings } from "@langchain/google-genai";
import { OpenAIEmbeddings } from "@langchain/openai";
// ä» @langchain/classic/vectorstores/memory åº“å¯¼å…¥ MemoryVectorStore ç±»ï¼Œç”¨äºåˆ›å»ºå†…å­˜å‘é‡å­˜å‚¨
import { MemoryVectorStore } from "@langchain/classic/vectorstores/memory";
// ä» @langchain/core/prompts åº“å¯¼å…¥ PromptTemplate ç±»ï¼Œç”¨äºåˆ›å»ºå¯é‡ç”¨çš„æç¤ºæ¨¡æ¿
import { PromptTemplate } from "@langchain/core/prompts";
// ä» @langchain/core/output_parsers åº“å¯¼å…¥ StringOutputParser ç±»ï¼Œç”¨äºå°† LLM è¾“å‡ºè§£æä¸ºå­—ç¬¦ä¸²
import { StringOutputParser } from "@langchain/core/output_parsers";

// è°ƒç”¨ config() å‡½æ•°åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ã€‚
// è¿™ä½¿å¾—å¯ä»¥é€šè¿‡ process.env.VAR_NAME è®¿é—® .env æ–‡ä»¶ä¸­å®šä¹‰çš„ç¯å¢ƒå˜é‡ã€‚
config();
// process.env.OPENAI_BASE_URL = process.env.OLLAMA_BASE_URL;

// 1ï¸âƒ£ åˆå§‹åŒ– LLM æ¨¡å‹ (AI å¤§è„‘)
// è¿™æ˜¯å°†ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆçš„ AI æ¨¡å‹
const model = new ChatOpenAI({
  // æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ OpenAI çš„ GPT-4 ç‰ˆæœ¬ï¼Œä¸€ä¸ªå¼ºå¤§çš„èŠå¤©æ¨¡å‹
  model: "gpt-4",
  // ä»ç¯å¢ƒå˜é‡ä¸­è·å– OpenAI API å¯†é’¥
  // apiKey: process.env.OPENAI_API_KEY,
});

// 2ï¸âƒ£ åˆå§‹åŒ–åµŒå…¥æ¨¡å‹
// åµŒå…¥æ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼ˆæ•°å­—æ•°ç»„ï¼‰ï¼Œè¿™ä½¿å¾—è¯­ä¹‰æœç´¢æˆä¸ºå¯èƒ½
const embeddings = new OpenAIEmbeddings({
  // æŒ‡å®šç”¨äºç”ŸæˆåµŒå…¥çš„æ¨¡å‹ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ OpenAI çš„ text-embedding-004 æ¨¡å‹
  model: "qwen3-embedding:4b",
  // ä»ç¯å¢ƒå˜é‡ä¸­è·å– OpenAI API å¯†é’¥
  // apiKey: process.env.OPENAI_API_KEY,
  configuration: {
    baseURL: process.env.OLLAMA_BASE_URL,
  },
});

// 3ï¸âƒ£ åˆå§‹åŒ–å‘é‡å­˜å‚¨ (å†…å­˜å‹å‘é‡æ•°æ®åº“)
// å‘é‡å­˜å‚¨ç”¨äºå­˜å‚¨æ–‡æœ¬çš„åµŒå…¥ï¼Œå¹¶å…è®¸æ£€ç´¢ç›¸ä¼¼çš„æ–‡æ¡£
const vectorStore = new MemoryVectorStore(embeddings);

// å®šä¹‰ä¸€ä¸ªå¼‚æ­¥ä¸»å‡½æ•°
async function main() {
  // 4ï¸âƒ£ å¡«å……è®°å¿† (æ‚¨çš„é•¿æœŸè®°å¿†)
  // å‘å‘é‡å­˜å‚¨æ·»åŠ ä¸€äº›æ–‡æ¡£ï¼Œè¿™äº›æ–‡æ¡£æ„æˆäº† RAG ç³»ç»Ÿçš„çŸ¥è¯†åº“
  await vectorStore.addDocuments([
    {
      pageContent: "Paresh æ­£åœ¨ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªæ™ºèƒ½ä½“ AI åç«¯ã€‚",
    },
    {
      pageContent: "ä»–å¸Œæœ›é€šè¿‡æ„å»º RAGã€æ™ºèƒ½ä½“å’Œç”µå­å•†åŠ¡ AI åº”ç”¨è¾¾åˆ° 15 LPA çš„ç›®æ ‡ã€‚",
    },
    {
      pageContent: "LangChain å¸®åŠ©è½»æ¾åˆ›å»ºæ™ºèƒ½ä½“ã€é“¾ã€å·¥å…·å’Œå‘é‡å†…å­˜ã€‚",
    },
    {
      pageContent: "Paresh ä»Šå¹´ 20 å²ã€‚",
    },
    {
      pageContent:
        "å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§å°†åº”ç”¨ç¨‹åºæ„å»ºä¸ºæ¾æ•£è€¦åˆæœåŠ¡é›†åˆçš„è®¾è®¡æ–¹æ³•ã€‚æ¯ä¸ªæœåŠ¡éƒ½æœ‰ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå¯ä»¥ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²å’Œæ‰©å±•ã€‚è¿™ç§æ¶æ„æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§ï¼Œä½†åŒæ—¶ä¹Ÿå¢åŠ äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚",
    },
    {
      pageContent:
        "RESTful API è®¾è®¡éµå¾ªèµ„æºå¯¼å‘çš„æ¶æ„é£æ ¼ï¼Œä½¿ç”¨ HTTP åŠ¨è¯è¡¨ç¤ºæ“ä½œï¼Œé€šè¿‡çŠ¶æ€ç è¡¨è¾¾ç»“æœã€‚è‰¯å¥½çš„ API è®¾è®¡åº”è¯¥å…·å¤‡ä¸€è‡´æ€§ã€å¯å‘ç°æ€§å’Œè‰¯å¥½çš„æ–‡æ¡£æ”¯æŒï¼Œé‡‡ç”¨ç‰ˆæœ¬æ§åˆ¶æ¥ç®¡ç† API çš„æ¼”è¿›ã€‚",
    },
    {
      pageContent:
        "æ•°æ®åº“ç´¢å¼•æ˜¯æé«˜æŸ¥è¯¢æ€§èƒ½çš„å…³é”®æŠ€æœ¯ã€‚B+æ ‘ç´¢å¼•é€‚ç”¨äºèŒƒå›´æŸ¥è¯¢ï¼Œå“ˆå¸Œç´¢å¼•é€‚ç”¨äºç²¾ç¡®åŒ¹é…ï¼Œä½å›¾ç´¢å¼•é€‚ç”¨äºä½åŸºæ•°åˆ—ã€‚åˆ›å»ºç´¢å¼•éœ€è¦æƒè¡¡æŸ¥è¯¢æ€§èƒ½å’Œå†™å…¥å¼€é”€ï¼Œé€‚å½“çš„ç´¢å¼•ç­–ç•¥å¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿå“åº”é€Ÿåº¦ã€‚",
    },
    {
      pageContent:
        "æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„æœ€ä½³å®è·µã€‚é€šè¿‡è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ï¼Œå›¢é˜Ÿå¯ä»¥æ›´å¿«åœ°äº¤ä»˜é«˜è´¨é‡è½¯ä»¶ã€‚Jenkinsã€GitLab CI å’Œ GitHub Actions æ˜¯å¸¸ç”¨çš„ CI/CD å·¥å…·ã€‚",
    },
    {
      pageContent:
        "å®¹å™¨åŒ–æŠ€æœ¯é€šè¿‡ Docker å’Œ Kubernetes å®ç°äº†åº”ç”¨çš„å¯ç§»æ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚å®¹å™¨æä¾›äº†è½»é‡çº§çš„è™šæ‹ŸåŒ–ï¼Œå…±äº«ä¸»æœºæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œæ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´åŠ é«˜æ•ˆã€‚Kubernetes æä¾›äº†å®¹å™¨ç¼–æ’å’Œè‡ªåŠ¨æ‰©ç¼©å®¹èƒ½åŠ›ã€‚",
    },
    {
      pageContent:
        "ä»£ç å®¡æŸ¥æ˜¯ä¿è¯ä»£ç è´¨é‡çš„é‡è¦ç¯èŠ‚ã€‚é€šè¿‡åŒäº‹ä¹‹é—´çš„ç›¸äº’å®¡æŸ¥ï¼Œå¯ä»¥å‘ç°æ½œåœ¨é—®é¢˜ã€åˆ†äº«çŸ¥è¯†ã€ä¿æŒä»£ç é£æ ¼ä¸€è‡´ã€‚Pull Request å’Œ Merge Request æ˜¯å¸¸ç”¨çš„ä»£ç å®¡æŸ¥å·¥ä½œæµç¨‹ã€‚",
    },
    {
      pageContent:
        "è½¯ä»¶æµ‹è¯•é‡‘å­—å¡”åŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚å•å…ƒæµ‹è¯•å æ¯”æœ€å¤§ï¼Œè¿è¡Œæœ€å¿«ï¼Œä¸“æ³¨äºéªŒè¯å•ä¸ªå‡½æ•°æˆ–ç±»çš„è¡Œä¸ºã€‚æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰æ˜¯ä¸€ç§å…ˆå†™æµ‹è¯•åå†™å®ç°çš„æ–¹æ³•è®ºã€‚",
    },
    {
      pageContent:
        "ç³»ç»Ÿè®¾è®¡ä¸­çš„CAPå®šç†æŒ‡å‡ºåˆ†å¸ƒå¼ç³»ç»Ÿæ— æ³•åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚åœ¨è®¾è®¡åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚åœ¨è¿™ä¸‰ä¸ªç‰¹æ€§ä¹‹é—´åšå‡ºæƒè¡¡ï¼Œé€‰æ‹©åˆé€‚çš„æ¶æ„æ–¹æ¡ˆã€‚",
    },
    {
      pageContent:
        "æ¶ˆæ¯é˜Ÿåˆ—å¦‚ RabbitMQ å’Œ Kafka åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­èµ·ç€å¼‚æ­¥é€šä¿¡å’Œè§£è€¦çš„ä½œç”¨ã€‚Kafka é€‚åˆé«˜ååé‡çš„æ—¥å¿—æµå¤„ç†ï¼ŒRabbitMQ æä¾›ä¸°å¯Œçš„è·¯ç”±åŠŸèƒ½ã€‚é€‰æ‹©åˆé€‚çš„æ¶ˆæ¯ä¸­é—´ä»¶éœ€è¦è€ƒè™‘ååé‡ã€å»¶è¿Ÿå’Œå¯é æ€§éœ€æ±‚ã€‚",
    },
    {
      pageContent:
        "ç¼“å­˜ç­–ç•¥æ˜¯æå‡ç³»ç»Ÿæ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚Redis å’Œ Memcached æ˜¯å¸¸ç”¨çš„åˆ†å¸ƒå¼ç¼“å­˜è§£å†³æ–¹æ¡ˆã€‚åˆç†çš„ç¼“å­˜è¿‡æœŸç­–ç•¥ã€ç¼“å­˜ç©¿é€é˜²æŠ¤å’Œç¼“å­˜é›ªå´©å¤„ç†æ˜¯ç¼“å­˜è®¾è®¡çš„å…³é”®è€ƒè™‘å› ç´ ã€‚",
    },
    {
      pageContent:
        "ç³»ç»Ÿå®‰å…¨è®¾è®¡éœ€è¦éµå¾ªæœ€å°æƒé™åŸåˆ™ã€‚è¾“å…¥éªŒè¯ã€SQL æ³¨å…¥é˜²æŠ¤ã€XSS é˜²æŠ¤å’Œ CSRF é˜²æŠ¤æ˜¯ Web åº”ç”¨å®‰å…¨çš„åŸºæœ¬è¦æ±‚ã€‚HTTPSã€èº«ä»½è®¤è¯å’Œæˆæƒæœºåˆ¶æ˜¯ä¿æŠ¤ç³»ç»Ÿå®‰å…¨çš„åŸºçŸ³ã€‚",
    },
    {
      pageContent:
        "æ€§èƒ½ä¼˜åŒ–éœ€è¦ä»å¤šä¸ªç»´åº¦è¿›è¡Œã€‚æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–åŒ…æ‹¬ä½¿ç”¨é€‚å½“çš„ç´¢å¼•ã€é¿å… N+1 æŸ¥è¯¢ã€ä¼˜åŒ–æ…¢æŸ¥è¯¢ã€‚åº”ç”¨å±‚ä¼˜åŒ–åŒ…æ‹¬ä»£ç ç®—æ³•æ”¹è¿›ã€å¼‚æ­¥å¤„ç†ã€èµ„æºæ± åŒ–ã€‚å‰ç«¯ä¼˜åŒ–åŒ…æ‹¬ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½å’Œç¼“å­˜ç­–ç•¥ã€‚",
    },
    {
      pageContent:
        "é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ˜¯ä¸€ç§å¤æ‚è½¯ä»¶ç³»ç»Ÿçš„è®¾è®¡æ–¹æ³•è®ºã€‚å®ƒå¼ºè°ƒé€šè¿‡æ·±å…¥ç†è§£ä¸šåŠ¡é¢†åŸŸæ¥æ„å»ºè½¯ä»¶æ¨¡å‹ã€‚æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬é™ç•Œä¸Šä¸‹æ–‡ã€èšåˆã€å®ä½“ã€å€¼å¯¹è±¡å’Œé¢†åŸŸäº‹ä»¶ã€‚",
    },
    {
      pageContent:
        "äº‹ä»¶é©±åŠ¨æ¶æ„é€šè¿‡äº‹ä»¶çš„å‘å¸ƒå’Œè®¢é˜…å®ç°ç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„æ¾è€¦åˆã€‚è¿™ç§æ¶æ„é€‚åˆå¤„ç†å¼‚æ­¥ä»»åŠ¡ã€å®æ—¶ç³»ç»Ÿå’Œå¤æ‚çš„ä¸šåŠ¡æµç¨‹ã€‚äº‹ä»¶æº¯æºå’Œ CQRS æ˜¯äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„é‡è¦æ¨¡å¼ã€‚",
    },
    {
      pageContent:
        "äº‘åŸç”Ÿåº”ç”¨è®¾è®¡éµå¾ªåäºŒè¦ç´ åº”ç”¨åŸåˆ™ã€‚è¿™äº›åŸåˆ™åŒ…æ‹¬åŸºå‡†ä»£ç ç®¡ç†ã€æ˜¾å¼ä¾èµ–å£°æ˜ã€é…ç½®å¤–éƒ¨åŒ–ã€åå°æœåŠ¡ç­‰åŒã€æ— çŠ¶æ€è¿›ç¨‹ã€ç«¯å£ç»‘å®šã€å¹¶å‘æ¨¡å‹ã€ä¾¿åˆ©æ€§åŸåˆ™å’Œå¼€å‘ç”Ÿäº§å¹³ç­‰ã€‚",
    },
    {
      pageContent:
        "æœåŠ¡ç½‘æ ¼å¦‚ Istio å’Œ Linkerd æä¾›äº†å¾®æœåŠ¡é—´é€šä¿¡çš„å¯è§‚æµ‹æ€§ã€å®‰å…¨æ€§å’Œæµé‡ç®¡ç†èƒ½åŠ›ã€‚é€šè¿‡ Sidecar ä»£ç†æ¨¡å¼ï¼ŒæœåŠ¡ç½‘æ ¼å¯ä»¥åœ¨ä¸ä¿®æ”¹åº”ç”¨ä»£ç çš„æƒ…å†µä¸‹å®ç°æœåŠ¡æ²»ç†åŠŸèƒ½ã€‚",
    },
    {
      pageContent:
        "Git ç‰ˆæœ¬æ§åˆ¶æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„åŸºç¡€ã€‚åˆ†æ”¯ç­–ç•¥å¦‚ Git Flow å’Œ GitHub Flow æŒ‡å¯¼å›¢é˜Ÿåä½œå¼€å‘ã€‚ä»£ç åˆå¹¶å†²çªçš„è§£å†³éœ€è¦ç†è§£åŸºç¡€åˆ†æ”¯çš„å˜æ›´å¹¶è°¨æ…åœ°æ•´åˆä»£ç ã€‚",
    },
    {
      pageContent:
        "æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰æ˜¯ SOLID è®¾è®¡åŸåˆ™ä¹‹ä¸€ã€‚å®ƒå»ºè®®å°†å¤§å‹æ¥å£æ‹†åˆ†ä¸ºå¤šä¸ªå°å‹ã€ç‰¹å®šçš„æ¥å£ï¼Œä½¿å®¢æˆ·ç«¯åªä¾èµ–å®ƒä»¬éœ€è¦çš„æ–¹æ³•ã€‚è¿™å‡å°‘äº†ä¸å¿…è¦çš„ä¾èµ–å’Œè€¦åˆï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚",
    },
    {
      pageContent:
        "é«˜å¯ç”¨ç³»ç»Ÿè®¾è®¡éœ€è¦è€ƒè™‘å†—ä½™ã€æ•…éšœè½¬ç§»å’Œè´Ÿè½½å‡è¡¡ã€‚é€šè¿‡å¤šæ´»æ•°æ®ä¸­å¿ƒã€è‡ªåŠ¨æ‰©ç¼©å®¹å’Œå¥åº·æ£€æŸ¥æœºåˆ¶ï¼Œç³»ç»Ÿå¯ä»¥åœ¨ç»„ä»¶æ•…éšœæ—¶ç»§ç»­æä¾›æœåŠ¡ã€‚SLA å’Œ SLO æ˜¯è¡¡é‡å¯ç”¨æ€§çš„å…³é”®æŒ‡æ ‡ã€‚",
    },
    {
      pageContent:
        "é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™åŒ…æ‹¬å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚SOLID åŸåˆ™ï¼ˆå•ä¸€èŒè´£ã€å¼€æ”¾å°é—­ã€é‡Œæ°æ›¿æ¢ã€æ¥å£éš”ç¦»å’Œä¾èµ–å€’ç½®ï¼‰æä¾›äº†ç¼–å†™å¯ç»´æŠ¤ã€å¯æ‰©å±•ä»£ç çš„æŒ‡å¯¼æ–¹é’ˆã€‚",
    },
    {
      pageContent:
        "API ç½‘å…³æ˜¯å¾®æœåŠ¡æ¶æ„çš„ç»Ÿä¸€å…¥å£ç‚¹ã€‚å®ƒè´Ÿè´£è¯·æ±‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€èº«ä»½è®¤è¯ã€é™æµç†”æ–­å’Œæ—¥å¿—ç›‘æ§ã€‚Kongã€Apigee å’Œ AWS API Gateway æ˜¯å¸¸ç”¨çš„ API ç½‘å…³è§£å†³æ–¹æ¡ˆã€‚",
    },
    {
      pageContent:
        "åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„æŒ‘æˆ˜ã€‚äºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰ã€ä¸‰é˜¶æ®µæäº¤ï¼ˆ3PCï¼‰å’ŒSagaæ¨¡å¼æ˜¯å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡çš„å¸¸è§æ–¹æ³•ã€‚TCCï¼ˆTry-Confirm-Cancelï¼‰æ¨¡å¼é€‚ç”¨äºéœ€è¦å¼ºä¸€è‡´æ€§çš„åœºæ™¯ã€‚",
    },
    {
      pageContent:
        "ä»£ç é‡æ„æ˜¯æŒç»­æ”¹è¿›ä»£ç è´¨é‡çš„è¿‡ç¨‹ã€‚è¯†åˆ«ä»£ç å¼‚å‘³ï¼ˆå¦‚é•¿æ–¹æ³•ã€é‡å¤ä»£ç ã€å·¨å‹ç±»ï¼‰å¹¶åº”ç”¨é‡æ„æŠ€æœ¯å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚é‡æ„åº”è¯¥åœ¨æœ‰æµ‹è¯•ä¿éšœçš„æƒ…å†µä¸‹è¿›è¡Œã€‚",
    },
    {
      pageContent:
        "æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerlessï¼‰å¦‚ AWS Lambda å’Œé˜¿é‡Œäº‘å‡½æ•°è®¡ç®—å…è®¸å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ã€‚äº‹ä»¶é©±åŠ¨å’ŒæŒ‰éœ€æ‰§è¡Œæ˜¯æ— æœåŠ¡å™¨æ¶æ„çš„ç‰¹ç‚¹ï¼Œé€‚åˆå¤„ç†çªå‘æµé‡å’Œå®šæ—¶ä»»åŠ¡ã€‚",
    },
    {
      pageContent:
        "æœç´¢å¼•æ“æŠ€æœ¯å¦‚ Elasticsearch æä¾›äº†å…¨æ–‡æœç´¢å’Œåˆ†æèƒ½åŠ›ã€‚å€’æ’ç´¢å¼•æ˜¯æœç´¢å¼•æ“çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ”¯æŒé«˜æ•ˆçš„è¯æ±‡æŸ¥è¯¢ã€‚åˆ†è¯å™¨å’Œç›¸å…³æ€§è¯„åˆ†ç®—æ³•å†³å®šäº†æœç´¢ç»“æœçš„è´¨é‡ã€‚",
    },
    {
      pageContent:
        "ç³»ç»Ÿç›‘æ§å’Œå¯è§‚æµ‹æ€§åŒ…æ‹¬æŒ‡æ ‡ã€æ—¥å¿—å’Œè¿½è¸ªä¸‰å¤§æ”¯æŸ±ã€‚Prometheus å’Œ Grafana ç»„åˆç”¨äºæŒ‡æ ‡ç›‘æ§ï¼ŒELK Stackï¼ˆElasticsearchã€Logstashã€Kibanaï¼‰ç”¨äºæ—¥å¿—åˆ†æï¼ŒJaeger å’Œ Zipkin ç”¨äºåˆ†å¸ƒå¼è¿½è¸ªã€‚",
    },
    {
      pageContent:
        "OAuth 2.0 å’Œ OpenID Connect æ˜¯ç°ä»£èº«ä»½è®¤è¯å’Œæˆæƒçš„æ ‡å‡†åè®®ã€‚æˆæƒç æµç¨‹é€‚ç”¨äº Web åº”ç”¨ï¼Œå®¢æˆ·ç«¯å‡­è¯æµç¨‹é€‚ç”¨äºæœåŠ¡é—´é€šä¿¡ï¼ŒPKCE å¢å¼ºäº†ç§»åŠ¨å’Œå•é¡µåº”ç”¨çš„å®‰å…¨æ€§ã€‚",
    },
    {
      pageContent:
        "GraphQL æ˜¯ä¸€ç§ API æŸ¥è¯¢è¯­è¨€å’Œè¿è¡Œæ—¶ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯ç²¾ç¡®è¯·æ±‚æ‰€éœ€çš„æ•°æ®ã€‚ä¸ REST ç›¸æ¯”ï¼ŒGraphQL å‡å°‘äº†ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œé¿å…äº†æ•°æ®è¿‡åº¦è·å–ï¼Œä½†éœ€è¦åˆç†çš„æŸ¥è¯¢å¤æ‚åº¦é™åˆ¶å’Œç¼“å­˜ç­–ç•¥ã€‚",
    },
    {
      pageContent:
        "è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶è®¾è®¡ä¸­å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚åˆ›å»ºå‹æ¨¡å¼ï¼ˆå•ä¾‹ã€å·¥å‚ã€å»ºé€ è€…ï¼‰å¤„ç†å¯¹è±¡åˆ›å»ºï¼Œç»“æ„å‹æ¨¡å¼ï¼ˆé€‚é…å™¨ã€è£…é¥°å™¨ã€ä»£ç†ï¼‰å¤„ç†å¯¹è±¡ç»„åˆï¼Œè¡Œä¸ºå‹æ¨¡å¼ï¼ˆè§‚å¯Ÿè€…ã€ç­–ç•¥ã€çŠ¶æ€ï¼‰å¤„ç†å¯¹è±¡äº¤äº’ã€‚",
    },
    {
      pageContent:
        "Kubernetes æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬ Podã€Serviceã€Deploymentã€StatefulSetã€ConfigMap å’Œ Secretã€‚Pod æ˜¯æœ€å°è°ƒåº¦å•å…ƒï¼ŒService æä¾›æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼ŒDeployment ç®¡ç†æ— çŠ¶æ€åº”ç”¨çš„éƒ¨ç½²å’Œæ‰©ç¼©å®¹ã€‚",
    },
    {
      pageContent:
        "æ•°æ®åº“äº‹åŠ¡çš„ ACID ç‰¹æ€§ä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚åŸå­æ€§ç¡®ä¿æ“ä½œå…¨åšæˆ–å…¨ä¸åšï¼Œä¸€è‡´æ€§ä¿è¯äº‹åŠ¡å‰åæ•°æ®éƒ½å¤„äºæœ‰æ•ˆçŠ¶æ€ï¼Œéš”ç¦»æ€§æ§åˆ¶å¹¶å‘äº‹åŠ¡ä¹‹é—´çš„ç›¸äº’å½±å“ï¼ŒæŒä¹…æ€§ç¡®ä¿æäº¤çš„äº‹åŠ¡ä¸ä¼šä¸¢å¤±ã€‚",
    },
    {
      pageContent:
        "å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼æé«˜äº†ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›å’Œå“åº”é€Ÿåº¦ã€‚JavaScript çš„ Promise å’Œ async/awaitã€Python çš„ asyncioã€Java çš„ CompletableFuture æä¾›äº†ä¼˜é›…çš„å¼‚æ­¥ç¼–ç¨‹æ¥å£ã€‚äº‹ä»¶å¾ªç¯æ˜¯å¼‚æ­¥æ‰§è¡Œçš„åŸºç¡€æœºåˆ¶ã€‚",
    },
    {
      pageContent:
        "è´Ÿè½½æµ‹è¯•å’Œå‹åŠ›æµ‹è¯•æ˜¯éªŒè¯ç³»ç»Ÿæ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚JMeterã€Locust å’Œ k6 æ˜¯å¸¸ç”¨çš„æ€§èƒ½æµ‹è¯•å·¥å…·ã€‚æµ‹è¯•åœºæ™¯åº”è¯¥æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºï¼Œå…³æ³¨å“åº”æ—¶é—´ã€ååé‡å’Œç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡ã€‚",
    },
    {
      pageContent:
        "æŠ€æœ¯å€ºæ˜¯å¿«é€Ÿå¼€å‘ä¸­ç§¯ç´¯çš„ä»£ç è´¨é‡å’Œè®¾è®¡é—®é¢˜ã€‚é€‚åº¦çš„æŠ€æœ¯å€ºå¯ä»¥åŠ é€Ÿäº§å“ä¸Šå¸‚ï¼Œä½†éœ€è¦å®šæœŸå¿è¿˜ã€‚ä»£ç é‡æ„ã€è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŠ€æœ¯å‡çº§æ˜¯å¿è¿˜æŠ€æœ¯å€ºçš„ä¸»è¦æ–¹å¼ã€‚",
    },
    {
      pageContent:
        "æ··æ²Œå·¥ç¨‹é€šè¿‡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¼•å…¥æ•…éšœæ¥éªŒè¯ç³»ç»Ÿçš„éŸ§æ€§ã€‚Netflix çš„ Chaos Monkey æ˜¯è‘—åçš„æ··æ²Œå·¥ç¨‹å·¥å…·ã€‚æ•…éšœæ¨¡å¼åŒ…æ‹¬æœåŠ¡å»¶è¿Ÿã€èµ„æºè€—å°½å’Œç½‘ç»œåˆ†åŒºï¼Œç›®æ ‡æ˜¯æå‰å‘ç°ç³»ç»Ÿçš„è–„å¼±ç¯èŠ‚ã€‚",
    },
    {
      pageContent:
        "API ç‰ˆæœ¬ç®¡ç†æ˜¯ API æ¼”è¿›çš„å…³é”®ç­–ç•¥ã€‚URI è·¯å¾„ç‰ˆæœ¬åŒ–ï¼ˆå¦‚ /v1/resourceï¼‰å’Œ Header ç‰ˆæœ¬åŒ–ï¼ˆå¦‚ Accept: application/vnd.api.v1+jsonï¼‰æ˜¯å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶æ–¹å¼ã€‚å‘åå…¼å®¹æ€§åº”è¯¥å°½å¯èƒ½ä¿æŒã€‚",
    },
    {
      pageContent:
        "é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰æ˜¯ä¸ºç‰¹å®šé—®é¢˜åŸŸè®¾è®¡çš„ç¼–ç¨‹è¯­è¨€ã€‚SQL ç”¨äºæ•°æ®åº“æŸ¥è¯¢ï¼ŒHTML ç”¨äºç½‘é¡µç»“æ„ï¼ŒRegex ç”¨äºæ¨¡å¼åŒ¹é…ã€‚æ„å»ºå†…éƒ¨ DSL å¯ä»¥æé«˜é¢†åŸŸä¸“å®¶å’Œå¼€å‘è€…ä¹‹é—´çš„æ²Ÿé€šæ•ˆç‡ã€‚",
    },
    {
      pageContent:
        "åˆ†å¸ƒå¼é”æ˜¯åè°ƒåˆ†å¸ƒå¼ç³»ç»Ÿå¹¶å‘è®¿é—®çš„æœºåˆ¶ã€‚Redis çš„ SETNX å’Œ Redlock ç®—æ³•ã€ZooKeeper çš„ä¸´æ—¶é¡ºåºèŠ‚ç‚¹æ˜¯å®ç°åˆ†å¸ƒå¼é”çš„å¸¸è§æ–¹å¼ã€‚é”çš„è¿‡æœŸæ—¶é—´è®¾ç½®éœ€è¦å¹³è¡¡å®‰å…¨æ€§å’Œå¯ç”¨æ€§ã€‚",
    },
    {
      pageContent:
        "å“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„ç¼–ç¨‹èŒƒå¼ã€‚Reactorã€RxJava å’Œ Project Reactor æä¾›äº†ä¸°å¯Œçš„å“åº”å¼ç¼–ç¨‹åº“ã€‚èƒŒå‹ï¼ˆBackpressureï¼‰æ˜¯å“åº”å¼ç³»ç»Ÿå¤„ç†è´Ÿè½½çš„é‡è¦æœºåˆ¶ã€‚",
    },
    {
      pageContent:
        "åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰é€šè¿‡ä»£ç ç®¡ç† IT åŸºç¡€è®¾æ–½ã€‚Terraform å’Œ Pulumi æ˜¯å£°æ˜å¼ IaC å·¥å…·ï¼ŒAnsible å’Œ Chef æ˜¯å‘½ä»¤å¼é…ç½®ç®¡ç†å·¥å…·ã€‚IaC å®ç°äº†åŸºç¡€è®¾æ–½çš„å¯é‡å¤éƒ¨ç½²å’Œç‰ˆæœ¬æ§åˆ¶ã€‚",
    },
    {
      pageContent:
        "æœåŠ¡é™çº§å’Œç†”æ–­æ˜¯ä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§çš„é‡è¦æœºåˆ¶ã€‚å½“æœåŠ¡å‡ºç°æ•…éšœæ—¶ï¼Œç†”æ–­å™¨é˜»æ­¢è¯·æ±‚ç»§ç»­å‘é€åˆ°æ•…éšœæœåŠ¡ï¼ŒæœåŠ¡é™çº§æä¾›å¤‡é€‰å“åº”ã€‚Hystrix å’Œ Resilience4j æ˜¯å¸¸ç”¨çš„ç†”æ–­åº“ã€‚",
    },
    {
      pageContent:
        "æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰æŠ€æœ¯åŒ…æ‹¬è¯­ä¹‰åŒ– HTMLã€åˆç†çš„æ ‡é¢˜å±‚çº§ç»“æ„ã€å†…éƒ¨é“¾æ¥ä¼˜åŒ–å’Œé¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–ã€‚ç»“æ„åŒ–æ•°æ®æ ‡è®°ï¼ˆSchema.orgï¼‰å¯ä»¥å¸®åŠ©æœç´¢å¼•æ“æ›´å¥½åœ°ç†è§£é¡µé¢å†…å®¹ã€‚",
    },
    {
      pageContent:
        "å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰å…è®¸ç”¨æˆ·ä½¿ç”¨ä¸€å¥—å‡­è¯è®¿é—®å¤šä¸ªåº”ç”¨ã€‚SAML å’Œ OAuth 2.0 çš„ Authorization Code Flow with PKCE æ˜¯å®ç° SSO çš„ä¸»æµåè®®ã€‚CASï¼ˆCentral Authentication Serviceï¼‰æ˜¯å¦ä¸€ç§ SSO è§£å†³æ–¹æ¡ˆã€‚",
    },
    {
      pageContent:
        "æ•°æ®æ¹–å’Œæ•°æ®ä»“åº“æ˜¯ä¸¤ç§ä¸åŒçš„æ•°æ®å­˜å‚¨æ¶æ„ã€‚æ•°æ®æ¹–å­˜å‚¨åŸå§‹æ ¼å¼çš„å¤šæ ·åŒ–æ•°æ®ï¼Œé€‚åˆæ¢ç´¢æ€§åˆ†æï¼›æ•°æ®ä»“åº“å­˜å‚¨ç»“æ„åŒ–çš„åŠ å·¥åæ•°æ®ï¼Œé€‚åˆæŠ¥è¡¨å’Œ BI åˆ†æã€‚Lake House æ¶æ„è¯•å›¾èåˆä¸¤è€…ä¼˜åŠ¿ã€‚",
    },
    {
      pageContent:
        "è¾¹ç¼˜è®¡ç®—å°†è®¡ç®—å’Œæ•°æ®å­˜å‚¨æ¨é€åˆ°é è¿‘æ•°æ®æºçš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œå‡å°‘å»¶è¿Ÿå’Œå¸¦å®½æ¶ˆè€—ã€‚CDN ç¼“å­˜ã€ç‰©è”ç½‘ç½‘å…³å’Œ 5G MECï¼ˆå¤šæ¥å…¥è¾¹ç¼˜è®¡ç®—ï¼‰æ˜¯è¾¹ç¼˜è®¡ç®—çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚",
    },
  ]);

  // 5ï¸âƒ£ ç”¨æˆ·é—®é¢˜
  const question = "å¦‚ä½•ä½¿ç”¨nodejså®ç°ä¸€ä¸ªç®€å•çš„ OAuth å•ç‚¹ç™»å½•";

  // 6ï¸âƒ£ æ£€ç´¢ç›¸ä¼¼æ–‡æ¡£
  // åµŒå…¥é—®é¢˜å¹¶ä¸å‘é‡å­˜å‚¨ä¸­çš„æ–‡æ¡£è¿›è¡Œæ¯”è¾ƒï¼Œè¿”å›æœ€ç›¸ä¼¼çš„æ–‡æ¡£
  const similarDocs = await vectorStore.similaritySearch(question); // æ£€ç´¢ 3 ä¸ªæœ€ç›¸ä¼¼çš„æ–‡æ¡£

  // 7ï¸âƒ£ å°†æ–‡æ¡£åˆå¹¶ä¸ºä¸Šä¸‹æ–‡
  // å°†æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹åˆå¹¶æˆä¸€ä¸ªå¤§çš„å­—ç¬¦ä¸²ï¼Œä½œä¸º LLM çš„ä¸Šä¸‹æ–‡
  const context = similarDocs.map((d) => d.pageContent).join("\\n");

  // 8ï¸âƒ£ æ„å»º RAG æç¤º
  // åˆ›å»ºä¸€ä¸ªæç¤ºæ¨¡æ¿ï¼Œå¼ºåˆ¶ AI ä½¿ç”¨æä¾›çš„ä¸Šä¸‹æ–‡æ¥å›ç­”é—®é¢˜
  const prompt = PromptTemplate.fromTemplate(`
ä½¿ç”¨ä¸Šä¸‹æ–‡å›ç­”ã€‚

CONTEXT:
{context}

QUESTION:
{question}

ANSWER:
`);

  // æ„å»ºæ•´ä¸ª RAG ç®¡é“é“¾ï¼šæç¤º -> æ¨¡å‹ -> è§£æå™¨
  const chain = prompt.pipe(model).pipe(new StringOutputParser());

  // 9ï¸âƒ£ è·å–æœ€ç»ˆç­”æ¡ˆ
  // è°ƒç”¨é“¾å¹¶ä¼ å…¥ä¸Šä¸‹æ–‡å’Œé—®é¢˜ï¼ŒAI å°†è¿”å›ä¸€ä¸ªåŸºäºäº‹å®çš„ç­”æ¡ˆ
  const answer = await chain.invoke({ context, question });

  console.log("ğŸ“Œ AI ç­”æ¡ˆ:\\n");
  console.log(answer);
}

// è°ƒç”¨ä¸»å‡½æ•°å¹¶æ•è·å¯èƒ½å‘ç”Ÿçš„é”™è¯¯
main().catch(console.error);
